@page "{id:int}"
@model WebApp.Pages.SetaBodies.DetailsModel
@{
    ViewData["Title"] = "SETA Body Details";
}

<div class="container mt-4">
    <div class="d-flex justify-content-between align-items-center mb-4">
        <div>
            <h2 class="mb-1"><i class="fas fa-sitemap text-info me-2"></i>SETA Body Details</h2>
            <p class="text-muted mb-0">View information about this SETA body</p>
        </div>
        <div>
            <a href="/SetaBodies/Edit/@Model.Id" class="btn btn-primary"><i class="fas fa-edit"></i> Edit</a>
            <a href="/SetaBodies/Index" class="btn btn-secondary"><i class="fas fa-arrow-left"></i> Back</a>
        </div>
    </div>
    <div class="card"><div class="card-body">
        <div class="row mb-3"><div class="col-md-3"><strong>ID</strong></div><div class="col-md-9">@Model.Id</div></div>
        <div class="row mb-3"><div class="col-md-3"><strong>Code</strong></div><div class="col-md-9" id="codeCell"></div></div>
        <div class="row mb-3"><div class="col-md-3"><strong>Name</strong></div><div class="col-md-9" id="nameCell"></div></div>
    </div></div>
    <div id="alert" class="alert mt-3" style="display:none"></div>
</div>

@section Scripts {
    <script>
        const apiBaseUrl = '@Configuration["ApiSettings:BaseUrl"]';
        const id='@Model.Id';
        async function load(){
            try{
                const res=await fetch(`${apiBaseUrl}/api/SetaBody/${id}`);
                if(!res.ok){ let msg='Failed to load'; try{ const e=await res.json(); msg=e.message||e.title||msg;}catch{} throw new Error(msg);} 
                const d=await res.json();
                document.getElementById('codeCell').textContent=(d.code ?? d.Code) || '';
                document.getElementById('nameCell').textContent=(d.name ?? d.Name) || '';
            }catch(err){ showAlert(err.message||'Error','danger'); }
        }
        function showAlert(m,t){ const a=document.getElementById('alert'); a.className=`alert alert-${t} mt-3`; a.textContent=m; a.style.display='block'; if(t==='success'||t==='info') setTimeout(()=>a.style.display='none',5000); }
        document.addEventListener('DOMContentLoaded', load);
    </script>
}
